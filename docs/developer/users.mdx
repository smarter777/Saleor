---
title: Manage Account as a Customer
sidebar_label: Users
---

## Introduction

This guide describes how to use the Saleor GraphQL API to register a new account as a customer and do common account management operations.

## Creating a new customer account

Depending on the configuration of your Saleor backend instance, registering a new customer account may be a single-step operation or it may require email confirmation to activate the account (see [`ENABLE_ACCOUNT_CONFIRMATION_BY_EMAIL`](developer/configuration.mdx#enable_account_confirmation_by_email)).

:::info
When a new account is created, Saleor checks if there are any orders in the system that were placed using the new account's email and are not assigned to any other user. If there are any, they're matched with the new account.
:::

Let's see first how to register a new account without email confirmation.

### Registration without email confirmation

To create a new customer account, use the `accountRegister` mutation. The mutation takes the following input fields:

- `email` - user's email address.
- `password` - user's password.

```graphql
mutation {
  accountRegister(
    input: { email: "customer@example.com", password: "secret" }
  ) {
    accountErrors {
      field
      code
    }
    user {
      email
      isActive
    }
  }
}
```

As a result, we get data of the newly created user:

```json
{
  "data": {
    "accountRegister": {
      "accountErrors": [],
      "user": {
        "email": "customer@example.com",
        "isActive": true
      }
    }
  }
}
```

The `isActive` flag informs that the account is active and the user can log in to their account.

Examples above include `accountErrors` field, which may return any [data-level errors](developer/error-handling.mdx#data-level-errors). Here is a response that would be returned if there is already account registered for the given email:

```json
{
  "data": {
    "accountRegister": {
      "accountErrors": [
        {
          "field": "email",
          "code": "UNIQUE"
        }
      ],
      "user": null
    }
  }
}
```

### Registration with email confirmation

Registering an account with email confirmation consists of two steps and it requires you to have a storefront view, where users will be redirected to confirm their email. First, you need to use the `accountRegister` mutation, which will create an inactive account and send an email with the confirmation link.

The mutation takes the following input fields:

- `email` - user's email address.
- `password` - user's password.
- `redirectUrl` - path to a view where the user should be redirected to confirm their email

This example assumes that you're running the storefront locally with the default settings (running on port `3000`):

```graphql
mutation {
  accountRegister(
    input: {
      email: "customer@example.com"
      password: "secret"
      redirectUrl: "http://localhost:3000/account-confirm/"
    }
  ) {
    accountErrors {
      field
      code
    }
    user {
      email
      isActive
    }
  }
}
```

As a result, we get data of the newly created, but yet inactive user:

```json
{
  "data": {
    "accountRegister": {
      "accountErrors": [],
      "user": {
        "email": "customer@example.com",
        "isActive": false
      }
    }
  }
}
```

At the same time the user `customer@example.com` should receive an email with a confirmation link based on provided `redirectUrl` path, for example:

```
http://localhost:3000/account-confirm/?email=customer%40example.com&token=5fc-9f2116f96bdafd612cf4
```

The link contains two query parameters - `email` and `token` - which are required to proceed with the second mutation, `confirmAccount`:

```graphql
mutation {
  confirmAccount(
    email: "customer@example.com"
    token: "5fc-9f2116f96bdafd612cf4"
  ) {
    accountErrors {
      field
      code
    }
    user {
      email
      isActive
    }
  }
}
```

If the token is valid, the user will be successfully activated:

```json
{
  "data": {
    "confirmAccount": {
      "accountErrors": [],
      "user": {
        "email": "customer@example.com",
        "isActive": true
      }
    }
  }
}
```

## Resetting password

Resetting the password is a two-step operation. First, you need to call a mutation to send an email with a unique link to reset the password.

The mutation takes the following input fields:

- `email` - user's email address.
- `redirectUrl` - path to a view where the user should be redirected to reset the password.

```graphql
mutation {
  requestPasswordReset(
    email: "customer@example.com"
    redirectUrl: "http://localhost:3000/reset-password/"
  ) {
    accountErrors {
      field
      code
    }
  }
}
```

As a result, if there are no errors in the response, the system sends an email to `customer@example.com` with a link to provide a new password, for example:

```
http://localhost:3000/reset-password/?email=customer%40example.com&token=5fc-9f2116f96bdafd612cf4
```

The link contains two query parameters - `email` and `token` - which are required to proceed with the second mutation, `setPassword`.

The mutation takes the following input fields:

- `token` - a unique token that was included in the link in the email.
- `email` - user's email address.
- `password` - the new password.

```graphql
mutation {
  setPassword(
    token: "5fc-9f2116f96bdafd612cf4"
    email: "customer@example.com"
    password: "new-secret"
  ) {
    accountErrors {
      field
      code
    }
  }
}
```

If there are no errors in the response, the password is successfully changed.

## Changing password

If you wish to change your password as an authenticated customer, use the `passwordChange` mutation. The mutation takes the following input fields:

- `oldPassword` - the current user's password.
- `newPassword` - the new password.

```graphql
mutation {
  passwordChange(oldPassword: "secret", newPassword: "new-secret") {
    accountErrors {
      field
      code
    }
  }
}
```

If no errors were returned, the password is now successfully changed.

This mutation requires the [authorization header with a valid JWT](developer/auth/jwt.mdx).

## Changing email

...

## Deleting an account

...
