# Avatax

[Avalara AvaTax](https://www.avalara.com/us/en/index.html) is a cloud-based solution automating transaction tax calculations and the tax filing process. Avalara
provides real-time tax calculation using tax content from more than 12,000 US taxing jurisdictions and over 200
countries, ensuring your transaction tax is calculated based on the most current tax rules.

## Features

Besides [the standard features](docs/developer/app-store/apps/taxes/overview.mdx#features), the Avatax integration provides the following:

### Document recording

Taxes App creates Avatax transactions on two events:

- while calculating taxes (in order or checkout)
- while creating an order

While calculating taxes, the default [document type](https://developer.avalara.com/avatax/dev-guide/transactions/document-types/) is `SalesOrder`. It makes the transaction temporary and not visible in the Avalara dashboard.

In the case of order creation, the default document type is `SalesInvoice`. It makes the transaction permanent and visible in the Avalara dashboard.

The Avatax configuration form in the Taxes App contains _Document recording_ toggle. When switched off, it changes all the document types to `SalesOrder`. This effectively stops the "document recording", making all the transactions temporary.

### Mapping the entity type

By providing the value for the Order metadata field of key `avataxEntityCode`, you can attach [`entityUseCode`](https://developer.avalara.com/erp-integration-guide/sales-tax-badge/designing/entity-code/) to transactions that will be created in Avatax. You can use this feature to, f.e., mark the customers that should be tax-exempted.

## Configuration

The list of the Avatax configuration fields contains:

- Instance name - a name for the instance. It will be used to identify the instance across all the views.
- Sandbox - a flag that indicates whether the instance should use [the sandbox environment or the production environment](https://developer.avalara.com/erp-integration-guide/sales-tax-badge/authentication-in-avatax/sandbox-vs-production/).
- Autocommit - a flag that indicates whether the instance should [automatically commit the transactions](https://developer.avalara.com/communications/dev-guide_rest_v2/commit-uncommit/).
- [Document recording](#document-recording) - a flag that indicates whether the instance should [record the transactions](https://developer.avalara.com/ecommerce-integration-guide/sales-tax-badge/designing/disable-document-recording/).
- Username - the username for the Avatax account. You will generate it in the Avalara dashboard (_Settings_ → _License and API keys_ → _License key_).
- Password - the password for the Avatax account. You will generate it in the Avalara dashboard (_Settings_ → _License and API keys_ → _License key_).
- Company code - the [company code](https://developer.avalara.com/ecommerce-integration-guide/sales-tax-badge/transactions/simple-transactions/company-codes/) for the Avatax account.
